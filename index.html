<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AI Diagnostic Reporter</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/marked/4.0.17/marked.min.js"></script>

  <style>
    body {
      font-family: 'Inter', sans-serif;
      background-color: #f7f9fb;
    }
    .diagnosis-card {
      box-shadow: 0 0 40px rgba(79, 70, 229, 0.15);
      transition: transform 0.3s ease-in-out;
    }
    .diagnosis-card:hover {
      transform: translateY(-2px);
    }
    .header-bg {
      background-image: linear-gradient(135deg, #4f46e5 0%, #a5b4fc 100%);
      color: white;
    }
    .processing {
      cursor: not-allowed;
      background-color: #9ca3af;
      transform: scale(1);
    }
    .report-content {
      background-color: #fff;
      padding: 1.5rem;
      border-radius: 0.75rem;
      box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1), 0 2px 4px -1px rgba(0,0,0,0.06);
    }
  </style>
</head>
<body class="p-4 md:p-8 min-h-screen">

  <div class="max-w-5xl mx-auto">

    <!-- Header -->
    <header class="header-bg p-6 rounded-t-xl mb-8 diagnosis-card">
      <h1 class="text-4xl font-extrabold text-center mb-1">AI Diagnostic Intelligence</h1>
      <p class="text-lg text-center text-indigo-200">System & Medical Analysis Tool</p>
    </header>

    <main class="grid grid-cols-1 lg:grid-cols-3 gap-6">

      <!-- Left Column: Overview & Settings -->
      <div class="lg:col-span-1 space-y-6">

        <!-- Overview Card -->
        <div class="bg-white p-6 rounded-xl diagnosis-card">
          <h2 class="text-xl font-bold text-gray-800 mb-3 border-b pb-2 text-indigo-700">Product Overview</h2>
          <p class="text-gray-600 text-sm leading-relaxed">
            This tool performs a structured analysis on your data. It separates <strong>Symptomatic/Objective</strong> data from <strong>Environmental/Contextual</strong> data, ranks potential diagnoses, provides confidence scores, and suggests next steps.
          </p>
        </div>

        <!-- Settings Card (decorative) -->
        <div class="bg-white p-6 rounded-xl diagnosis-card">
          <h2 class="text-xl font-bold text-gray-800 mb-4 border-b pb-2 text-indigo-700">Analysis Settings</h2>
          <div class="mb-5">
            <label class="block text-sm font-medium text-gray-700 mb-1">Analysis Depth</label>
            <input type="range" min="1" max="10" value="8" class="w-full h-2 bg-indigo-100 rounded-lg" disabled>
            <div class="flex justify-between text-xs text-gray-500 mt-1">
              <span>Shallow (1)</span>
              <span>Deep (10)</span>
            </div>
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">Contextual Data Weight</label>
            <input type="range" min="1" max="10" value="6" class="w-full h-2 bg-indigo-100 rounded-lg" disabled>
            <div class="flex justify-between text-xs text-gray-500 mt-1">
              <span>Low (1)</span>
              <span>High (10)</span>
            </div>
          </div>
          <p class="mt-4 text-xs italic text-gray-500">Sliders are decorative; AI output is internally optimized for complexity.</p>
        </div>

      </div>

      <!-- Right Column: Input & Output -->
      <div class="lg:col-span-2 space-y-6">

        <!-- Input Area -->
        <div class="bg-white p-6 rounded-xl diagnosis-card">
          <label for="unifiedInput" class="block text-xl font-semibold text-gray-700 mb-3 text-indigo-700">
            2. Unified Input Area
          </label>
          <textarea id="unifiedInput" rows="10" placeholder="Enter full dataset (medical charts, system logs, observations)..." class="w-full p-4 border border-indigo-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500 transition duration-150 ease-in-out resize-none text-gray-800 focus:shadow-indigo-300 focus:shadow-md"></textarea>
          
          <div class="mt-6 flex flex-col items-center">
            <button id="diagnoseButton" onclick="analyzeSymptoms()" class="px-8 py-3 bg-indigo-600 text-white font-bold rounded-full shadow-lg hover:bg-indigo-700 transition duration-300 ease-in-out transform hover:scale-[1.03] active:scale-[0.98]">
              Generate Detailed Report
            </button>
            <div id="loadingIndicator" class="hidden mt-4 flex items-center justify-center space-x-2 text-indigo-600 font-medium">
              <svg class="animate-spin h-5 w-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
              </svg>
              <span>Processing & Fact-Checking Diagnosis...</span>
            </div>
          </div>
        </div>

        <!-- Results Display -->
        <div id="results" class="mt-10 min-h-[300px]">
          <div class="text-center text-gray-500 italic p-6 border-2 border-dashed border-indigo-200 rounded-xl bg-white">
            <svg class="mx-auto h-12 w-12 text-indigo-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M13 12h.01"></path></svg>
            <p class="mt-2 text-lg font-medium">Report Ready</p>
            <p class="text-sm">Your comprehensive analysis will appear here after processing.</p>
          </div>
        </div>

      </div>

    </main>
  </div>

  <script>
    function generateSimulatedResponse(inputText) {
      const confidence = inputText.length > 500 ? '95%' : '70%';
      const diagnosis = inputText.toLowerCase().includes('fatigue') && inputText.toLowerCase().includes('weakness') 
          ? 'Myasthenia Gravis (Simulated)' 
          : 'Acute System Instability (Simulated)';

      return `
# Comprehensive Diagnostic Analysis (SIMULATED)

## 1. Data Separation & Categorization

### A. Symptomatic/Objective Data
The system detected ${inputText.length > 300 ? 'specific lab markers and temporal patterns' : 'core complaints and baseline vitals'}.

### B. Environmental/Contextual Data
Contextual factors such as lifestyle and historical usage patterns were analyzed to refine the hypotheses.

## 2. Two-Stage Analysis Summary
Initial hypotheses were generated and adjusted with contextual weighting. Data consistency allows for high confidence.

## 3. Confidence Assessment
- **AI Confidence Score:** **${confidence}**
- **Rationale:** Input contained internally consistent and confirmatory data.

## 4. Ranked Differential Diagnoses
1. **${diagnosis}** (High likelihood)
2. **Viral Syndrom (Atypical)** (Medium likelihood)
3. **Chronic Inflammatory Response** (Low likelihood)

## 5. Plan & Recommendations
* Consult a specialist.
* Review historical logs for triggers.
* Begin baseline monitoring of key metrics.

## 6. Essential Data Needed
None, data is sufficient for assessment.
`;
    }

    function renderAnalysisReport(text) {
      const resultsDiv = document.getElementById('results');
      resultsDiv.innerHTML = `
        <div class="report-content prose max-w-none p-6 md:p-8">
          ${marked.parse(text)}
          <p class="mt-6 text-sm italic text-red-600 font-medium border-t pt-4">
            Disclaimer: This report is generated by an AI simulation for analytical purposes only.
          </p>
        </div>
      `;
    }

    async function analyzeSymptoms() {
      const input = document.getElementById('unifiedInput').value.trim();
      const btn = document.getElementById('diagnoseButton');
      const loading = document.getElementById('loadingIndicator');
      const resultsDiv = document.getElementById('results');

      if (!input) {
        resultsDiv.innerHTML = '<p class="text-red-600 text-center p-4 bg-red-50 rounded-lg">Enter data to generate analysis.</p>';
        return;
      }

      btn.disabled = true;
      btn.classList.add('processing');
      btn.textContent = 'Analyzing Data...';
      loading.classList.remove('hidden');
      resultsDiv.innerHTML = '';

      await new Promise(r => setTimeout(r, 1500));

      const simulated = generateSimulatedResponse(input);
      renderAnalysisReport(simulated);

      btn.disabled = false;
      btn.classList.remove('processing');
      btn.textContent = 'Generate Detailed Report';
      loading.classList.add('hidden');
    }
  </script>
</body>
</html>
